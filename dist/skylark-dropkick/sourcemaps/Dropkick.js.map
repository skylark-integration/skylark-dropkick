{"version":3,"sources":["Dropkick.js"],"names":["define","skylark","$","_","defaults","isMobile","test","navigator","userAgent","isIframe","window","parent","self","_docListener","Dropkick","[object Object]","select","options","i","dk","this","sel","globalDK","document","getElementById","substr","uid","cache","data","extend","settings","length","nodeName","init","opts","build","elem","disabled","form","multiple","slice","selectedIndex","selectedOptions","selected","value","cacheID","initialize","call","_changeListener","addEventListener","mobile","parentNode","insertBefore","setAttribute","onDocClick","before","text","option","createElement","create","class","data-value","innerHTML","role","aria-selected","id","replace","addClass","className","hidden","add","item","indexOf","splice","lastChild","appendChild","push","index","dkOption","removeChild","remove","isOpen","removeClass","close","dropHeight","above","below","direction","dkTop","dkBottom","dkOptsList","supportPageOffset","undefined","pageXOffset","isCSS1Compat","compatMode","scrollY","pageYOffset","documentElement","scrollTop","body","offset","top","innerHeight","offsetHeight","style","display","_scrollTo","open","disabledClass","arguments","combobox","getAttribute","hasClass","toggleClass","firstChild","dispatchEvent","CustomEvent","bubbles","bubble","reset","pattern","mode","tokens","str","tIndex","sIndex","cScore","tScore","reg","matches","toLowerCase","RegExp","split","e","s","sort","a","b","reduce","p","o","children","focus","clear","defaultSelected","Object","keys","dispose","removeAttribute","event","type","_delegate","_keyHandler","_searchOptions","_highlight","change","selection","firstIndex","lastIndex","target","getSelection","collapseToStart","shiftKey","ctrlKey","metaKey","lastSelected","j","keyCode","preventDefault","results","keyChar","String","fromCharCode","which","searchString","searchTimeout","clearTimeout","setTimeout","search","selectOne","optPos","optTop","dkOpts","position","idpre","selOpt","optList","ret","addOption","node","optgroup","optgroupList","label","unshift","classList","forEach","tabindex","aria-live","aria-owns","tId","nodeType","closest","fn","dropkick","args","Array","prototype","each","apply","attach"],"mappings":"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","file":"../Dropkick.js","sourcesContent":["define([\n  \"skylark-langx/skylark\",\n  \"skylark-jquery\",\n  './utils',\n  './defaults'\n],function(skylark,$,_,defaults){\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test( navigator.userAgent );\n    const isIframe = window.parent !== window.self;\n    const noop = function() {};\n    let _docListener;\n\n    /**\n     * # Getting started\n     * After you've cloned the repo you will need to add the library to your page. In the `build/js` folder use\n     * one of the two DropKick files given. One has a version number in the file name and the other is a version\n     * number-less version. You will also need to grab the css from `build/css` and load it on the page.\n     *\n     * Once those files are imported into the page you can call DropKick on any HTMLSelectElement:\n     * `new Dropkick( HTMLSelectElement, Options );` or `new Dropkick( \"ID\", Options );`. This returns the dropkick\n     * object to you. It may be useful for you to store this in a var to reference later.\n     *\n     * If you're using jQuery you can do this instead:\n     * `$('#select').dropkick( Options );`\n     *\n     *\n     * @class Dropkick\n     * @return { object } DropKick Object for that select. You can call your methods on this if stored in a var\n     * @param {elem} sel HTMLSelect Element being passed.\n     * @param {opts} options See list of [properties you can pass in here](#list_of_properties)\n     * @constructor\n     * @example\n     * // Pure JS\n     * var select = new Dropkick(\"#select\");\n     * @example\n     * // jQuery\n     * $(\"#select\").dropkick();\n     */\n    class Dropkick {\n      constructor(select, options) {\n        this.sel = select;\n        let i, dk;\n        let globalDK = window.Dropkick;\n\n        if ( typeof this.sel === \"string\" && this.sel[0] === \"#\" ) {\n          this.sel = document.getElementById( select.substr( 1 ) );\n        }\n\n        // Check if select has already been DK'd and return the DK Object\n        for ( i = 0; i < globalDK.uid; i++) {\n          dk = globalDK.cache[ i ];\n\n          if ( dk instanceof Dropkick && dk.data.select === this.sel ) {\n            _.extend( dk.data.settings, options );\n            return dk;\n          }\n        }\n\n        if ( !this.sel ) {\n          throw \"You must pass a select to DropKick\";\n          return false;\n        }\n\n        if ( this.sel.length < 1 ) {\n          throw `You must have options inside your <select>: ${select}`;\n          return false;\n        }\n\n        if ( this.sel.nodeName === \"SELECT\" ) {\n          return this.init( this.sel, options );\n        }\n      }\n\n      /**\n       * Initializes the DK Object\n       *\n       * @method init\n       * @private\n       * @param  {Node}   sel  [description]\n       * @param  {Object} opts Options to override defaults\n       * @return {Object}      The DK Object\n       */\n      init( sel, opts ) {\n        let globalDK = window.Dropkick;\n        var i,\n            dk =  Dropkick.build( sel, \"dk\" + globalDK.uid );\n\n        // Set some data on the DK Object\n        this.data = {};\n        this.data.select = sel;\n        this.data.elem = dk.elem;\n        this.data.settings = _.extend({}, defaults, opts );\n\n        // Emulate some of HTMLSelectElement's properties\n\n        /**\n         * Whether the form is currently disabled or not\n         *\n         * @property {boolean} disabled\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.disabled;\n         */\n        this.disabled = sel.disabled;\n\n        /**\n         * The form associated with the select\n         *\n         * @property {node} form\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.form;\n         */\n        this.form = sel.form;\n\n        /**\n         * The number of options in the select\n         *\n         * @property {integer} length\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.length;\n         */\n        this.length = sel.length;\n\n        /**\n         * If this select is a multi-select\n         *\n         * @property {boolean} multiple\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.multiple;\n         */\n        this.multiple = sel.multiple;\n\n        /**\n         * An array of Dropkick options\n         *\n         * @property {array} options\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.options;\n         */\n        this.options = dk.options.slice( 0 );\n\n        /**\n         * An index of the first selected option\n         *\n         * @property {integer} selectedIndex\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.selectedIndex;\n         */\n        this.selectedIndex = sel.selectedIndex;\n\n        /**\n         * An array of selected Dropkick options\n         *\n         * @property {array} selectedOptions\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.selectedOptions;\n         */\n        this.selectedOptions = dk.selected.slice( 0 );\n\n        /**\n         * The current value of the select\n         *\n         * @property {string} value\n         * @example\n         * var select = new Dropkick(\"#select\");\n         *\n         * select.value;\n         */\n        this.value = sel.value;\n\n        // Add the DK Object to the cache\n        this.data.cacheID = globalDK.uid;\n        globalDK.cache[ this.data.cacheID ] = this;\n\n        // Call the optional initialize function\n        this.data.settings.initialize.call( this );\n\n        // Increment the index\n        globalDK.uid += 1;\n\n        // Add the change listener to the select\n        if ( !this._changeListener ) {\n          sel.addEventListener( \"change\", this );\n          this._changeListener = true;\n        }\n\n        // Don't continue if we're not rendering on mobile\n        if ( !( isMobile && !this.data.settings.mobile ) ) {\n\n          // Insert the DK element before the original select\n          sel.parentNode.insertBefore( this.data.elem, sel );\n          sel.setAttribute( \"data-dkCacheId\", this.data.cacheID );\n\n          // Bind events\n          this.data.elem.addEventListener( \"click\", this );\n          this.data.elem.addEventListener( \"keydown\", this );\n          this.data.elem.addEventListener( \"keypress\", this );\n\n          if ( this.form ) {\n            this.form.addEventListener( \"reset\", this );\n          }\n\n          if ( !this.multiple ) {\n            for ( i = 0; i < this.options.length; i++ ) {\n              this.options[ i ].addEventListener( \"mouseover\", this );\n            }\n          }\n\n          if ( !_docListener ) {\n            document.addEventListener( \"click\", Dropkick.onDocClick );\n\n            if ( isIframe ){\n              parent.document.addEventListener( \"click\", Dropkick.onDocClick );\n            }\n\n            _docListener = true;\n          }\n        }\n\n        return this;\n      }\n      // Emulate some of HTMLSelectElement's methods\n\n      /**\n       * Adds an element to the select. This option will not only add it to the original\n       * select, but create a Dropkick option and add it to the Dropkick select.\n       *\n       * @method add\n       * @param {string} elem   HTMLOptionElement\n       * @param {Node/Integer} before HTMLOptionElement/Index of Element\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.add(\"New option\", 5);\n       */\n      add( elem, before ) {\n        var text, option, i;\n\n        if ( typeof elem === \"string\" ) {\n          text = elem;\n          elem = document.createElement(\"option\");\n          elem.text = text;\n        }\n\n        if ( elem.nodeName === \"OPTION\" ) {\n          option = _.create( \"li\", {\n            \"class\": \"dk-option\",\n            \"data-value\": elem.value,\n            \"text\": elem.text,\n            \"innerHTML\": elem.innerHTML,\n            \"role\": \"option\",\n            \"aria-selected\": \"false\",\n            \"id\": \"dk\" + this.data.cacheID + \"-\" + ( elem.id || elem.value.replace( \" \", \"-\" ) )\n          });\n\n          _.addClass( option, elem.className );\n          this.length += 1;\n\n          if ( elem.disabled ) {\n            _.addClass( option, \"dk-option-disabled\" );\n            option.setAttribute( \"aria-disabled\", \"true\" );\n          }\n\n          if ( elem.hidden ) {\n            _.addClass( option, \"dk-option-hidden\" );\n            option.setAttribute( \"aria-hidden\", \"true\" );\n          }\n\n          this.data.select.add( elem, before );\n\n          if ( typeof before === \"number\" ) {\n            before = this.item( before );\n          }\n\n          i = this.options.indexOf( before );\n\n          if ( i > -1 ) {\n            before.parentNode.insertBefore( option, before );\n            this.options.splice( i, 0, option );\n          } else {\n            this.data.elem.lastChild.appendChild( option );\n            this.options.push( option );\n          }\n\n          option.addEventListener( \"mouseover\", this );\n\n          if ( elem.selected ) {\n            this.select( i );\n          }\n        }\n      }\n\n      /**\n       * Selects an option in the list at the desired index (negative numbers select from the end).\n       *\n       * @method item\n       * @param  {Integer} index Index of element (positive or negative)\n       * @return {Node}          The DK option from the list, or null if not found\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.item(4); //returns DOM node of index\n       */\n      item( index ) {\n        index = index < 0 ? this.options.length + index : index;\n        return this.options[ index ] || null;\n      }\n\n      /**\n       * Removes the option (from both the select and Dropkick) at the given index.\n       *\n       * @method  remove\n       * @param  {Integer} index Index of element (positive or negative)\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.remove(4);\n       */\n      remove( index ) {\n        let dkOption = this.item( index );\n        dkOption.parentNode.removeChild( dkOption );\n        this.options.splice( index, 1 );\n        this.data.select.remove( index );\n        this.select( this.data.select.selectedIndex );\n        this.length -= 1;\n      }\n\n      /**\n       * Closes the DK dropdown\n       *\n       * @method close\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.close(); //closes dk dropdown\n       */\n      close() {\n        var i,\n            dk = this.data.elem;\n\n        if ( !this.isOpen || this.multiple ) {\n          return false;\n        }\n\n        for ( i = 0; i < this.options.length; i++ ) {\n          _.removeClass( this.options[ i ], \"dk-option-highlight\" );\n        }\n\n        dk.lastChild.setAttribute( \"aria-expanded\", \"false\" );\n        _.removeClass( dk.lastChild, \"dk-select-options-highlight\" );\n        _.removeClass( dk, \"dk-select-open-(up|down)\" );\n        this.isOpen = false;\n\n        this.data.settings.close.call( this );\n      }\n\n      /**\n       * Opens the DK dropdown\n       *\n       * @method open\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.open(); //Opens the dk dropdown\n       */\n      // TODO: This used to run with the deffered util method\n      // is that needed? What problem was that solving?\n      // to make sure this runs in the next animation tick?\n      open() {\n        let dropHeight, above, below, direction, dkTop, dkBottom;\n        let dk = this.data.elem;\n        let dkOptsList = dk.lastChild;\n        // Using MDNs suggestion for crossbrowser scrollY:\n        // https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY\n        let supportPageOffset = window.pageXOffset !== undefined;\n        let isCSS1Compat = ((document.compatMode || \"\") === \"CSS1Compat\");\n        let scrollY = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n\n        dkTop = _.offset( dk ).top - scrollY;\n        dkBottom = window.innerHeight - ( dkTop + dk.offsetHeight );\n\n        if ( this.isOpen || this.multiple ) { return false; }\n\n        dkOptsList.style.display = \"block\";\n        dropHeight = dkOptsList.offsetHeight;\n        dkOptsList.style.display = \"\";\n\n        above = dkTop > dropHeight;\n        below = dkBottom > dropHeight;\n        direction = above && !below ? \"-up\" : \"-down\";\n\n        this.isOpen = true;\n        _.addClass( dk, \"dk-select-open\" + direction );\n        dkOptsList.setAttribute( \"aria-expanded\", \"true\" );\n        this._scrollTo( this.options.length - 1 );\n        this._scrollTo( this.selectedIndex );\n\n        this.data.settings.open.call( this );\n      }\n\n      /**\n       * Disables or enables an option; if only a boolean is passed (or nothing),\n       * then the entire Dropkick will be disabled or enabled.\n       *\n       * @method disable\n       * @param  {Integer} elem     The element or index to disable\n       * @param  {Boolean}      disabled Value of disabled\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * // To disable the entire select\n       * select.disable();\n       *\n       * // To disable just an option with an index\n       * select.disable(4, true);\n       *\n       * // To re-enable the entire select\n       * select.disable(false);\n       *\n       * // To re-enable just an option with an index\n       * select.disable(4, false);\n       */\n      disable( elem, disabled ) {\n        var disabledClass = \"dk-option-disabled\";\n\n        if ( arguments.length === 0 || typeof elem === \"boolean\" ) {\n          disabled = elem === undefined ? true : false;\n          elem = this.data.elem;\n          disabledClass = \"dk-select-disabled\";\n          this.disabled = disabled;\n        }\n\n        if ( disabled === undefined ) {\n          disabled = true;\n        }\n\n        if ( typeof elem === \"number\" ) {\n          elem = this.item( elem );\n        }\n\n        if (disabled) {\n          elem.setAttribute( 'aria-disabled', true );\n          _.addClass( elem, disabledClass );\n        } else {\n          elem.setAttribute( 'aria-disabled', false );\n          _.removeClass( elem, disabledClass );\n        }\n      }\n\n      /**\n       * Hides or shows an option.\n       *\n       * @method hide\n       * @param  {Integer} elem     The element or index to hide\n       * @param  {Boolean} hidden   Whether or not to hide the element\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * // To hide an option with an index\n       * select.hide(4, true);\n       *\n       * // To make an option visible with an index\n       * select.hide(4, false);\n       */\n      hide( elem, hidden ) {\n        var hiddenClass = \"dk-option-hidden\";\n\n        if ( hidden === undefined ) {\n          hidden = true;\n        }\n\n        elem = this.item( elem );\n\n        if (hidden) {\n          elem.setAttribute( 'aria-hidden', true );\n          _.addClass( elem, hiddenClass );\n        } else {\n          elem.setAttribute( 'aria-hidden', false );\n          _.removeClass( elem, hiddenClass );\n        }\n      }\n\n      /**\n       * Selects an option from the list\n       *\n       * @method select\n       * @param  {String} elem     The element, index, or value to select\n       * @param  {Boolean}             disabled Selects disabled options\n       * @return {Node}                         The selected element\n       * @example\n       * var elm = new Dropkick(\"#select\");\n       *\n       * // Select by index\n       * elm.select(4); //selects & returns 5th item in the list\n       *\n       * // Select by value\n       * elm.select(\"AL\"); // selects & returns option with the value \"AL\"\n       */\n      select( elem, disabled ) {\n        var i, index, option, combobox,\n        select = this.data.select;\n\n        if ( typeof elem === \"number\" ) {\n          elem = this.item( elem );\n        }\n\n        if ( typeof elem === \"string\" ) {\n          for ( i = 0; i < this.length; i++ ) {\n            if ( this.options[ i ].getAttribute( \"data-value\" ) === elem ) {\n              elem = this.options[ i ];\n            }\n          }\n        }\n\n        // No element or enabled option\n        if ( !elem || typeof elem === \"string\" ||\n             ( !disabled && _.hasClass( elem, \"dk-option-disabled\" ) ) ) {\n          return false;\n        }\n\n        if ( _.hasClass( elem, \"dk-option\" ) ) {\n          index = this.options.indexOf( elem );\n          option = select.options[ index ];\n\n          if ( this.multiple ) {\n            _.toggleClass( elem, \"dk-option-selected\" );\n            option.selected = !option.selected;\n\n            if ( _.hasClass( elem, \"dk-option-selected\" ) ) {\n              elem.setAttribute( \"aria-selected\", \"true\" );\n              this.selectedOptions.push( elem );\n            } else {\n              elem.setAttribute( \"aria-selected\", \"false\" );\n              index = this.selectedOptions.indexOf( elem );\n              this.selectedOptions.splice( index, 1 );\n            }\n          } else {\n            combobox = this.data.elem.firstChild;\n\n            if ( this.selectedOptions.length ) {\n              _.removeClass( this.selectedOptions[0], \"dk-option-selected\" );\n              this.selectedOptions[0].setAttribute( \"aria-selected\", \"false\" );\n            }\n\n            _.addClass( elem, \"dk-option-selected\" );\n            elem.setAttribute( \"aria-selected\", \"true\" );\n\n            combobox.setAttribute( \"aria-activedescendant\", elem.id );\n            combobox.className = \"dk-selected \" + option.className;\n            combobox.innerHTML = option.innerHTML;\n\n            this.selectedOptions[0] = elem;\n            option.selected = true;\n          }\n\n          this.selectedIndex = select.selectedIndex;\n          this.value = select.value;\n\n          if ( !disabled ) {\n            this.data.select.dispatchEvent( new CustomEvent(\"change\", {bubbles: this.data.settings.bubble}));\n          }\n\n          return elem;\n        }\n      }\n\n      /**\n       * Selects a single option from the list and scrolls to it (if the select is open or on multi-selects).\n       * Useful for selecting an option after a search by the user. Important to note: this doesn't close the\n       * dropdown when selecting. It keeps the dropdown open and scrolls to proper position.\n       *\n       * @method selectOne\n       * @param  {Integer} elem     The element or index to select\n       * @param  {Boolean}      disabled Selects disabled options\n       * @return {Node}                  The selected element\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.selectOne(4);\n       */\n      selectOne( elem, disabled ) {\n        this.reset( true );\n        this._scrollTo( elem );\n        return this.select( elem, disabled );\n      }\n\n      /**\n       * Finds all options who's text matches a pattern (strict, partial, or fuzzy)\n       *\n       * `\"strict\"` - The search string matches exactly from the beginning of the\n       * option's text value (case insensitive).\n       *\n       * `\"partial\"` - The search string matches part of the option's text value\n       * (case insensitive).\n       *\n       * `\"fuzzy\"` - The search string matches the characters in the given order (not\n       * exclusively). The strongest match is selected first. (case insensitive).\n       *\n       * @method search\n       * @param  {String} string  The string to search for\n       * @param  {Integer} mode   How to search; \"strict\", \"partial\", or \"fuzzy\"\n       * @return {Boolean}  An Array of matched elements\n       */\n      search( pattern, mode ) {\n        var i, tokens, str, tIndex, sIndex, cScore, tScore, reg,\n        options = this.data.select.options,\n        matches = [];\n\n        if ( !pattern ) { return this.options; }\n\n        // Fix Mode\n        mode = mode ? mode.toLowerCase() : \"strict\";\n        mode = mode === \"fuzzy\" ? 2 : mode === \"partial\" ? 1 : 0;\n\n        reg = new RegExp( ( mode ? \"\" : \"^\" ) + pattern, \"i\" );\n\n        for ( i = 0; i < options.length; i++ ) {\n          str = options[ i ].text.toLowerCase();\n\n          // Fuzzy\n          if ( mode == 2 ) {\n            tokens = pattern.toLowerCase().split(\"\");\n            tIndex = sIndex = cScore = tScore = 0;\n\n            while ( sIndex < str.length ) {\n              if ( str[ sIndex ] === tokens[ tIndex ] ) {\n                cScore += 1 + cScore;\n                tIndex++;\n              } else {\n                cScore = 0;\n              }\n\n              tScore += cScore;\n              sIndex++;\n            }\n\n            if ( tIndex === tokens.length ) {\n              matches.push({ e: this.options[ i ], s: tScore, i: i });\n            }\n\n            // Partial or Strict (Default)\n          } else {\n            reg.test( str ) && matches.push( this.options[ i ] );\n          }\n        }\n\n        // Sort fuzzy results\n        if ( mode === 2 ) {\n          matches = matches.sort( function ( a, b ) {\n            return ( b.s - a.s ) || a.i - b.i;\n          }).reduce( function ( p, o ) {\n            p[ p.length ] = o.e;\n            return p;\n          }, [] );\n        }\n\n        return matches;\n      }\n\n      /**\n       * Brings focus to the proper DK element\n       *\n       * @method focus\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * $(\"#some_elm\").on(\"click\", function() {\n       *   select.focus();\n       * });\n       */\n      focus() {\n        if ( !this.disabled ) {\n          ( this.multiple ? this.data.elem : this.data.elem.children[0] ).focus();\n        }\n      }\n\n      /**\n       * Resets the Dropkick and select to it's original selected options; if `clear` is `true`,\n       * It will select the first option by default (or no options for multi-selects).\n       *\n       * @method reset\n       * @param  {Boolean} clear Defaults to first option if true\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * // Reset to originally `selected` option\n       * select.reset();\n       *\n       * // Reset to first option in select\n       * select.reset(true);\n       */\n      reset( clear ) {\n        var i,\n        select = this.data.select;\n\n        this.selectedOptions.length = 0;\n\n        for ( i = 0; i < select.options.length; i++ ) {\n          select.options[ i ].selected = false;\n          _.removeClass( this.options[ i ], \"dk-option-selected\" );\n          this.options[ i ].setAttribute( \"aria-selected\", \"false\" );\n          if ( !clear && select.options[ i ].defaultSelected ) {\n            this.select( i, true );\n          }\n        }\n\n        if ( !this.selectedOptions.length && !this.multiple ) {\n          this.select( 0, true );\n        }\n      }\n\n      /**\n       * Rebuilds the DK Object\n       * (use if HTMLSelectElement has changed)\n       *\n       * @method refresh\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * //... [change original select] ...\n       *\n       * select.refresh();\n       */\n      refresh() {\n        if(Object.keys(this).length > 0 && !( isMobile && !this.data.settings.mobile )) {\n          this.dispose().init( this.data.select, this.data.settings );\n        }\n      }\n\n      /**\n       * Removes the DK Object from the cache and the element from the DOM\n       *\n       * @method dispose\n       * @example\n       * var select = new Dropkick(\"#select\");\n       *\n       * select.dispose();\n       */\n      dispose() {\n        let globalDK = window.Dropkick;\n\n        if (Object.keys(this).length > 0 && !( isMobile && !this.data.settings.mobile )) {\n          delete globalDK.cache[ this.data.cacheID ];\n          this.data.elem.parentNode.removeChild( this.data.elem );\n          this.data.select.removeAttribute( \"data-dkCacheId\" );\n        }\n\n        return this;\n      }\n\n      // Private Methods\n\n      /**\n       * @method handleEvent\n       * @private\n       */\n      handleEvent( event ) {\n        if ( this.disabled ) { return; }\n\n        switch ( event.type ) {\n        case \"click\":\n          this._delegate( event );\n          break;\n        case \"keydown\":\n          this._keyHandler( event );\n          break;\n        case \"keypress\":\n          this._searchOptions( event );\n          break;\n        case \"mouseover\":\n          this._highlight( event );\n          break;\n        case \"reset\":\n          this.reset();\n          break;\n        case \"change\":\n          this.data.settings.change.call( this );\n          break;\n        }\n      }\n\n\n      /**\n       * @method delegate\n       * @private\n       */\n      _delegate( event ) {\n        var selection, index, firstIndex, lastIndex,\n        target = event.target;\n\n        if ( _.hasClass( target, \"dk-option-disabled\" ) ) {\n          return false;\n        }\n\n        if ( !this.multiple ) {\n          this[ this.isOpen ? \"close\" : \"open\" ]();\n          if ( _.hasClass( target, \"dk-option\" ) ) { this.select( target ); }\n        } else {\n          if ( _.hasClass( target, \"dk-option\" ) ) {\n            selection = window.getSelection();\n            if ( selection.type === \"Range\" ) selection.collapseToStart();\n\n            if ( event.shiftKey ) {\n              firstIndex = this.options.indexOf( this.selectedOptions[0] );\n              lastIndex = this.options.indexOf( this.selectedOptions[ this.selectedOptions.length - 1 ] );\n              index =  this.options.indexOf( target );\n\n              if ( index > firstIndex && index < lastIndex ) index = firstIndex;\n              if ( index > lastIndex && lastIndex > firstIndex ) lastIndex = firstIndex;\n\n              this.reset( true );\n\n              if ( lastIndex > index ) {\n                while ( index < lastIndex + 1 ) { this.select( index++ ); }\n              } else {\n                while ( index > lastIndex - 1 ) { this.select( index-- ); }\n              }\n            } else if ( event.ctrlKey || event.metaKey ) {\n              this.select( target );\n            } else {\n              this.reset( true );\n              this.select( target );\n            }\n          }\n        }\n      }\n\n      /**\n       * @method highlight\n       * @private\n       */\n      _highlight( event ) {\n        var i, option = event.target;\n\n        if ( !this.multiple ) {\n          for ( i = 0; i < this.options.length; i++ ) {\n            _.removeClass( this.options[ i ], \"dk-option-highlight\" );\n          }\n\n          _.addClass( this.data.elem.lastChild, \"dk-select-options-highlight\" );\n          _.addClass( option, \"dk-option-highlight\" );\n        }\n      }\n\n      /**\n       * @method keyHandler\n       * @private\n       */\n      _keyHandler( event ) {\n        var lastSelected, j,\n        selected = this.selectedOptions,\n        options = this.options,\n        i = 1,\n        keys = {\n          tab: 9,\n          enter: 13,\n          esc: 27,\n          space: 32,\n          up: 38,\n          down: 40\n        };\n\n        switch ( event.keyCode ) {\n        case keys.up:\n          i = -1;\n          // deliberate fallthrough\n        case keys.down:\n          event.preventDefault();\n          lastSelected = selected[ selected.length - 1 ];\n\n          if ( _.hasClass( this.data.elem.lastChild, \"dk-select-options-highlight\" ) ) {\n            _.removeClass( this.data.elem.lastChild, \"dk-select-options-highlight\" );\n            for ( j = 0; j < options.length; j++ ) {\n              if ( _.hasClass( options[ j ], \"dk-option-highlight\" ) ) {\n                _.removeClass( options[ j ], \"dk-option-highlight\" );\n                lastSelected = options[ j ];\n              }\n            }\n          }\n\n          i = options.indexOf( lastSelected ) + i;\n\n          if ( i > options.length - 1 ) {\n            i = options.length - 1;\n          } else if ( i < 0 ) {\n            i = 0;\n          }\n\n          if ( !this.data.select.options[ i ].disabled ) {\n            this.reset( true );\n            this.select( i );\n            this._scrollTo( i );\n          }\n          break;\n        case keys.space:\n          if ( !this.isOpen ) {\n            event.preventDefault();\n            this.open();\n            break;\n          }\n          // deliberate fallthrough\n        case keys.tab:\n        case keys.enter:\n          for ( i = 0; i < options.length; i++ ) {\n            if ( _.hasClass( options[ i ], \"dk-option-highlight\" ) ) {\n              this.select( i );\n            }\n          }\n          // deliberate fallthrough\n        case keys.esc:\n          if ( this.isOpen ) {\n            event.preventDefault();\n            this.close();\n          }\n          break;\n        }\n      }\n\n      /**\n       * @method searchOptions\n       * @private\n       */\n      _searchOptions( event ) {\n        var results,\n            self = this,\n            keyChar = String.fromCharCode( event.keyCode || event.which ),\n\n            waitToReset = function() {\n              if ( self.data.searchTimeout ) {\n                clearTimeout( self.data.searchTimeout );\n              }\n\n              self.data.searchTimeout = setTimeout(function() {\n                self.data.searchString = \"\";\n              }, 1000 );\n            };\n\n        if ( this.data.searchString === undefined ) {\n          this.data.searchString = \"\";\n        }\n\n        waitToReset();\n\n        this.data.searchString += keyChar;\n        results = this.search( this.data.searchString, this.data.settings.search );\n\n        if ( results.length ) {\n          if ( !_.hasClass( results[0], \"dk-option-disabled\" ) ) {\n            this.selectOne( results[0] );\n          }\n        }\n      }\n\n      /**\n       * @method scrollTo\n       * @private\n       */\n      _scrollTo( option ) {\n        var optPos, optTop, optBottom,\n            dkOpts = this.data.elem.lastChild;\n\n        if ( option === -1 || ( typeof option !== \"number\" && !option ) ||\n             ( !this.isOpen && !this.multiple ) ) {\n          return false;\n        }\n\n        if ( typeof option === \"number\" ) {\n          option = this.item( option );\n        }\n\n        optPos = _.position( option, dkOpts ).top;\n        optTop = optPos - dkOpts.scrollTop;\n        optBottom = optTop + option.offsetHeight;\n\n        if ( optBottom > dkOpts.offsetHeight ) {\n          optPos += option.offsetHeight;\n          dkOpts.scrollTop = optPos - dkOpts.offsetHeight;\n        } else if ( optTop < 0 ) {\n          dkOpts.scrollTop = optPos;\n        }\n      }\n    };\n\n    // Cache of DK Objects\n    // currently can't think of a way to do this not in the global space\n    // since DK isn't a singleton.\n\n    // is this cache a must have?\n    window.Dropkick = Dropkick;\n    window.Dropkick.cache = {};\n    window.Dropkick.uid = 0;\n\n    // Static Methods\n\n    /**\n     * Builds the Dropkick element from a select element\n     *\n     * @method  build\n     * @private\n     * @param  {Node} sel The HTMLSelectElement\n     * @return {Object}   An object containing the new DK element and it's options\n     */\n    Dropkick.build = function( sel, idpre ) {\n      var selOpt, optList, i,\n          options = [],\n\n          ret = {\n            elem: null,\n            options: [],\n            selected: []\n          },\n\n          addOption = function ( node ) {\n            var option, optgroup, optgroupList, i,\n                children = [];\n\n            switch ( node.nodeName ) {\n            case \"OPTION\":\n              option = _.create( \"li\", {\n                \"class\": \"dk-option \",\n                \"data-value\": node.value,\n                \"text\": node.text,\n                \"innerHTML\": node.innerHTML,\n                \"role\": \"option\",\n                \"aria-selected\": \"false\",\n                \"id\": idpre + \"-\" + ( node.id || node.value.replace( \" \", \"-\" ) )\n              });\n\n              _.addClass( option, node.className );\n\n              if ( node.disabled ) {\n                _.addClass( option, \"dk-option-disabled\" );\n                option.setAttribute( \"aria-disabled\", \"true\" );\n              }\n\n              if ( node.hidden ) {\n                _.addClass( option, \"dk-option-hidden\" );\n                option.setAttribute( \"aria-hidden\", \"true\" );\n              }\n\n              if ( node.selected ) {\n                _.addClass( option, \"dk-option-selected\" );\n                option.setAttribute( \"aria-selected\", \"true\" );\n                ret.selected.push( option );\n              }\n\n              ret.options.push( this.appendChild( option ) );\n              break;\n            case \"OPTGROUP\":\n              optgroup = _.create( \"li\", { \"class\": \"dk-optgroup\" });\n\n              if ( node.label ) {\n                optgroup.appendChild( _.create( \"div\", {\n                  \"class\": \"dk-optgroup-label\",\n                  \"innerHTML\": node.label\n                }));\n              }\n\n              optgroupList = _.create( \"ul\", {\n                \"class\": \"dk-optgroup-options\"\n              });\n\n              for ( i = node.children.length; i--; children.unshift( node.children[ i ] ) );\n\n              if (node.disabled) {\n                optgroup.classList.add('dk-optgroup-disabled');\n\n                children.forEach(option => {\n                  option.disabled = node.disabled;\n                });\n              }\n\n              children.forEach( addOption, optgroupList );\n\n              this.appendChild( optgroup ).appendChild( optgroupList );\n              break;\n            }\n          };\n\n      ret.elem = _.create( \"div\", {\n        \"class\": \"dk-select\" + ( sel.multiple ? \"-multi\" : \"\" )\n      });\n\n      optList = _.create( \"ul\", {\n        \"class\": \"dk-select-options\",\n        \"id\": idpre + \"-listbox\",\n        \"role\": \"listbox\"\n      });\n\n      if (sel.disabled) {\n        _.addClass( ret.elem, \"dk-select-disabled\" );\n        ret.elem.setAttribute( 'aria-disabled', true );\n      }\n      ret.elem.id = idpre + ( sel.id ? \"-\" + sel.id : \"\" );\n      _.addClass( ret.elem, sel.className );\n\n      if ( !sel.multiple ) {\n        selOpt = sel.options[ sel.selectedIndex ];\n        ret.elem.appendChild( _.create( \"div\", {\n          \"class\": \"dk-selected \" + ( selOpt ? selOpt.className : \"\" ),\n          \"tabindex\": sel.tabindex || 0,\n          \"innerHTML\": selOpt ? selOpt.text : '&nbsp;',\n          \"id\": idpre + \"-combobox\",\n          \"aria-live\": \"assertive\",\n          \"aria-owns\": optList.id,\n          \"role\": \"combobox\"\n        }));\n        optList.setAttribute( \"aria-expanded\", \"false\" );\n      } else {\n        ret.elem.setAttribute( \"tabindex\", sel.getAttribute( \"tabindex\" ) || \"0\" );\n        optList.setAttribute( \"aria-multiselectable\", \"true\" );\n      }\n\n      for ( i = sel.children.length; i--; options.unshift( sel.children[ i ] ) );\n      options.forEach( addOption, ret.elem.appendChild( optList ) );\n\n      return ret;\n    };\n\n    /**\n     * Focus DK Element when corresponding label is clicked; close all other DK's\n     *\n     * @method  onDocClick\n     * @private\n     * @param {Object} event  Event from document click\n     */\n    Dropkick.onDocClick = function( event ) {\n      var tId, i;\n      let globalDK = window.Dropkick;\n\n      if (event.target.nodeType !== 1) {\n        return false;\n      }\n\n      if ( ( tId = event.target.getAttribute( \"data-dkcacheid\" ) ) !== null ) {\n        globalDK.cache[ tId ].focus();\n      }\n\n      for ( i in globalDK.cache ) {\n        if ( !_.closest( event.target, globalDK.cache[ i ].data.elem ) && i !== tId ) {\n          globalDK.cache[ i ].disabled || globalDK.cache[ i ].close();\n        }\n      }\n    };\n\n\n    // Add jQuery method\n    $.fn.dropkick = function () {\n        var args = Array.prototype.slice.call( arguments );\n        return $( this ).each(function() {\n          if ( !args[0] || typeof args[0] === 'object' ) {\n            new Dropkick( this, args[0] || {} );\n          } else if ( typeof args[0] === 'string' ) {\n            Dropkick.prototype[ args[0] ].apply( new Dropkick( this ), args.slice( 1 ) );\n          }\n        });\n    };\n\n\n    return skylark.attach(\"intg.Dropkick\",Dropkick);\n});"]}